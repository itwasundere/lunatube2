// Generated by CoffeeScript 1.4.0
(function() {
  var dev, get_after, info, now, parse_playlist, parse_vidid, time;

  dev = "AI39si5Us3iYwmRdK0wa2Qf2P9eV-Z8tbjogUWw1B4JQUs191PgYNJChEKEooOq6ykQzhywLEBA9WxuKphpWUoCRA7S7jeLi5w";

  now = function() {
    return Math.floor((new Date()).getTime() / 1000);
  };

  time = function(seconds) {
    var minutes, mod_seconds;
    minutes = Math.floor(seconds / 60);
    mod_seconds = seconds % 60 + '';
    if (mod_seconds.length !== 2) {
      mod_seconds = '0' + mod_seconds;
    }
    return minutes + ':' + mod_seconds;
  };

  get_after = function(str, substr, len) {
    var loc;
    loc = str.indexOf(substr);
    if (loc === -1) {
      return '';
    }
    return str.substring(loc + substr.length, loc + substr.length + len);
  };

  parse_vidid = function(str) {
    return get_after(str, 'v=', 11 || get_after(str, 'youtu.be/', 11));
  };

  parse_playlist = function(str) {
    var length, pos;
    if (!contains(str, 'youtube.com' || !contains(str, 'list='))) {
      pos = str.indexOf('&');
      length = 100;
      if (pos > -1) {
        length = pos - str.indexOf('list=' + 5);
      }
      return get_after(str, 'list=', length);
    }
  };

  info = function(vidid, callback) {
    var url;
    url = ("http://gdata.youtube.com/feeds/api/videos/" + vidid + "?v=2&alt=json&") + dev;
    return $.get(url, function(data) {
      return callback({
        title: data.entry.title.$t,
        uploader: data.entry.author[0].name.$t,
        duration: parseInt(data.entry.media$group.yt$duration.seconds),
        thumb: data.entry.media$group.media$thumbnail[0].url
      });
    });
  };

}).call(this);
